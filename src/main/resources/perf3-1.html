<html><head><style type="text/css" id="owaParaStyle" style="display: none;">P {margin-top:0;margin-bottom:0;}</style></head><body dir="ltr" fpstyle="1" aria-label="Message body" tabindex="0" id=""><div name="divtagdefaultwrapper" id="divtagdefaultwrapper" style="font-family: Calibri,Arial,Helvetica,sans-serif; font-size: 12pt; color: #000000; margin: 0"><h2 style="margin: 0px; padding: 2px 0px 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">JIT Compiler</h2><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="compiler_types" id="compiler_types" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>What's the difference between the -client and -server systems?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">These two systems are different binaries. They are essentially two different compilers (JITs)interfacing to the same runtime system. The client system is optimal for applications which need fast startup times or small footprints, the server system is optimal for applications where the overall performance is most important. In general the client system is better suited for interactive applications such as GUIs. Some of the other differences include the compilation policy,heap defaults, and inlining policy.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><a name="compiler_download" id="compiler_download" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">Where do I get the server and client systems?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Client and server systems are both downloaded with the 32-bit Solaris and Linux downloads. For 32-bit Windows, if you download the JRE, you get only the client, you'll need to download the SDK to get both systems.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">For 64-bit, only the server system is included. On Solaris, the 64-bit JRE is an overlay on top of the 32-bit distribution. However, on Linux and Windows, it's a completely separate distribution.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="compiler_default" id="compiler_default" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>I would like java to default to -server. I have a lot of scripts which I cannot change (or do not want to change). Is there any way to do this?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Since Java SE 5.0, with the exception of 32-bit Windows, the server VM will automatically be selected on server-class machines. The definition of a server-class machine may change from release to release, so please check the appropriate ergonomics document for the definition for your release. For 5.0, it's&nbsp;<a href="http://www.oracle.com/technetwork/java/ergo5-140223.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Ergonomics in the 5.0 Java[tm] Virtual Machine</a>.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="compiler_warmup" id="compiler_warmup" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Should I warm up my loops first so that Hotspot will compile them?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Warming up loops for HotSpot is not necessary. HotSpot contains On Stack Replacement technology which will compile a running (interpreted) method and replace it while it is still running in a loop. No need to waste your applications time warming up seemingly infinite (or very long running) loops in order to get better application performance.</p><span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><h2 style="margin: 0px; padding: 2px 0px 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">64-bit Java</h2><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_description" id="64bit_description" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>What is 64-bit Java?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-style: italic;">What it is</span>:&nbsp; A 64-bit version of Java has been available to Solaris SPARC users since the 1.4.0 release of J2SE.&nbsp; A 64-bit capable J2SE is an implementation of the Java SDK (and the JRE along with it) that runs in the 64-bit environment of a 64-bit OS on a 64-bit processor. You can think of this environment as being just another platform to which we've ported the SDK.&nbsp; The primary advantage of running Java in a 64-bit environment is the larger address space. This allows for a much larger Java heap size and an increased maximum number of Java Threads, which is needed for certain kinds of large or long-running applications.&nbsp; The primary complication in doing such a port is that the sizes of some native data types are changed. Not surprisingly the size of pointers is increased to 64 bits. On Solaris and most Unix platforms, the size of the C language long is also increased to 64 bits. Any native code in the 32-bit SDK implementation that relied on the old sizes of these data types is likely to require updating.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">Within the parts of the SDK written in Java things are simpler, since Java specifies the sizes of its primitive data types precisely. However even some Java code needs updating, such as when a Java int is used to store a value passed to it from a part of the implementation written in C.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-style: italic;">What it is NOT:&nbsp;</span>&nbsp;Many Java users and developers assume that a 64-bit implementation means that many of the built-in Java types are doubled in size from 32 to 64.&nbsp; This is not true.&nbsp; We did not increase the size of Java integers from 32 to 64 and since Java longs were already 64 bits wide, they didn't need updating.&nbsp; Array indexes, which are defined in the Java Virtual Machine Specification, are not widened from 32 to 64.&nbsp; We were extremely careful during the creation of the first 64-bit Java port to insure Java binary and API compatibility so all existing 100% pure Java programs would continue running just as they do under a 32-bit VM.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_platforms" id="64bit_platforms" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Which platforms and Java releases support 64-bit operation?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">In order to run a 64-bit version of Java you must have a processor and operating system that can support the execution of 64-bit applications.&nbsp; The tables below list the supported 64-bit operating systems and CPUs for J2SE 1.4.2 and Java SE 5.0.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(119, 119, 119);">J2SE 1.4.2 Releases</strong></p><div class="g15" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><div class="g15v2" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><table width="100%" cellspacing="1" cellpadding="4" border="0" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><tbody style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><tr valign="top" align="center" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><th rowspan="2" colspan="1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; border: 1px solid black;">PROCESSORS</th><th rowspan="1" colspan="3" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; border: 1px solid black;">OPERATING SYSTEMS</th></tr><tr valign="top" align="center" class="grey1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">SOLARIS</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">WINDOWS Server 2003&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">WINDOWS XP 64-bit Edition</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">LINUX</td></tr><tr valign="top" align="center" class="grey1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">SPARC</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td></tr><tr valign="top" align="center" class="grey1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">IA64 - Itanium</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES</td></tr><tr valign="top" align="center" class="grey1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">AMD64 &amp; EM64T</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES (1.4.2_11)</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES (1.4.2_11)</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td></tr></tbody></table></div></div><span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(119, 119, 119);">Java SE 5.0 Releases</strong></p><div class="g15" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><div class="g15v2" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><table width="100%" cellspacing="1" cellpadding="4" border="0" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><tbody style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><tr valign="top" align="center" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><th rowspan="2" colspan="1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; border: 1px solid black;">PROCESSORS</th><th rowspan="1" colspan="3" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; border: 1px solid black;">OPERATING SYSTEMS</th></tr><tr valign="top" align="center" class="grey1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">SOLARIS</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">WINDOWS Server 2003&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">WINDOWS XP 64-bit Edition</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">LINUX</td></tr><tr valign="top" align="center" class="grey1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">SPARC</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td></tr><tr valign="top" align="center" class="grey1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">IA64 - Itanium</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">NO</td></tr><tr valign="top" align="center" class="grey1" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">AMD64 &amp; EM64T</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES (5.0_02)</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES</td><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; text-align: left; vertical-align: top;">YES</td></tr></tbody></table></div></div><span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_download" id="64bit_download" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Where can I download the 64-bit SDK or JRE?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">The J2SE 1.4.2 SDK and JRE packages can be downloaded from here:&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a href="http://www.oracle.com/technetwork/java/javase/download-138376.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">link</a>&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">The Java SE 5.0 SDK and JRE packages can be downloaded from here:&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index-jdk5-jsp-142662.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">link</a>&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_layering" id="64bit_layering" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>When you download the SDK or JRE, must you choose between the 32 and 64-bit versions?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">For the Solaris 64-bit packages, you must first install the 32-bit SDKor JRE and then select and install the 64-bit package on top of the 32-bit version.&nbsp; For all other platforms, you need onlyinterested in.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">select and install the 64-bit package in which you are</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><a name="64bit_selection" id="64bit_selection" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">How do I select between 32 and 64-bit operation? What's the default? The options -d32 and -d64 have been added to the Java launcher to specify whether the program is to be run in a 32 or 64-bit environment. On Solaris these correspond to the ILP32 and LP64 data models, respectively.&nbsp; Since Solaris has both a 32 and 64-bit J2SE implementation contained within the same installation of Java, you can specify either version.&nbsp; If neither -d32 nor -d64 is specified, the default is to run in a 32-bit environment.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">Other Java commands (javac, javadoc, etc.) will rarely need to be executed in a 64-bit environment. However, the -d32/-d64 options may be passed to these commands and then on to the Java launcher using the established -J prefix option (eg: -J-d64).&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">All other platforms (Windows and Linux) contain separate 32 and 64-bit installation packages.&nbsp; If both packages are installed on a system, you select one or the other by adding the appropriate "bin" directory to your path.&nbsp; For consistency, the Java implementations on Linux accept the -d64 option.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_compilers" id="64bit_compilers" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Are both -client and -server VM modes available in 64-bit Java?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Currently only the Java HotSpot Server VM supports 64-bit operation, and the -server option is implicit with the use of -d64. This is subject to change in a future release.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_components" id="64bit_components" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Which components do not support 64-bit operation?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">The Java Plug-in, AWT Robot and Java Web Start currently do not support 64-bit operation.&nbsp; Use 32-bit Java if you require these features.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_native_code" id="64bit_native_code" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>How is native code affected?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">There are no changes to public native interfaces (JNI, the AWT Native Interface, JPDA) for 64-bit development. 64-bit versions of all public native libraries are provided, with the 'sparc' component of the pathnames replaced by 'sparcv9'. Any 64-bit native code that links against a native library must use the 64-bit version of that library, using the LD_LIBRARY_PATH[_64] environment variables or some other mechanism.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">When porting 32-bit native code to 64-bit Java platforms, you will need to modify you code to be 64-bit clean.&nbsp; This involves examining your C/C+ + code and looking for code that assumes the size of a pointer to be 4 bytes or that a pointer can be cast and stored in an integer. &nbsp;&nbsp;<span style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-style: italic;">Long</span>&nbsp;data types are also troublesome when porting 32-bit code.&nbsp; You should avoid the use of&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-style: italic;">longs</span>&nbsp;if at all possible since longs have different sizes on different operating systems even in 64-bit.&nbsp; Windows 64-bit platforms define&nbsp;<span style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-style: italic;">longs</span>&nbsp;to be 4 bytes but most Unix operating systems specify that longs are 8 bytes in size.&nbsp; For more details, refer to the links below under learning more about 64-bit programming.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_detection" id="64bit_detection" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>When writing Java code, how do I distinguish between 32 and 64-bit operation?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">There's no public API that allows you to distinguish between 32 and 64-bit operation.&nbsp; Think of 64-bit as just another platform in the write once, run anywhere tradition.&nbsp; However, if you'd like to write code which is platform specific (shame on you),&nbsp; the system property sun.arch.data.model has the value "32", "64", or "unknown".&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_native_porting" id="64bit_native_porting" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Will 32-bit native code work with a 64-bit VM?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">No.&nbsp; All native binary code that was written for a 32-bit VM must be recompiled for use in a 64-bit VM.&nbsp; All currently supported operating systems do not allow the mixing of 32 and 64-bit binaries or libraries within a single process.&nbsp; You can run a 32-bit Java process on the same system as a 64-bit Java process but you cannot mix 32 and 64-bit native libraries.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_more_info" id="64bit_more_info" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Where can I learn more about 64-bit programming?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">See the&nbsp;<a href="http://docs-pdf.sun.com/816-5138/816-5138.pdf" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Solaris 64-bit Developer's Guide</a>. The section on converting applications to 64-bit is especially useful.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><em class="yschurl" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"></em>The document&nbsp;<span class="yschttl" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a href="http://gcc.fyxm.net/summit/2003/Porting%20to%2064%20bit.pdf" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Porting to 64-bit GNU/Linux Systems</a>&nbsp;provides some useful information for Linux developers.&nbsp;</span><a href="http://gcc.fyxm.net/summit/2003/Porting%20to%2064%20bit.pdf#search=%27porting%20code%20to%20Linux%2064%20bit%27" class="yschttl" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;"><span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"></a></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><a name="64bit_performance" id="64bit_performance" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">What are the performance characteristics of 64-bit versus 32-bit VMs?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Generally, the benefits of being able to address larger amounts of memory come with a small performance loss in 64-bit VMs versus running the same application on a 32-bit VM.&nbsp; This is due to the fact that every native pointer in the system takes up 8 bytes instead of 4.&nbsp; The loading of this extra data has an impact on memory usage which translates to slightly slower execution depending on how many pointers get loaded during the execution of your Java program.&nbsp; The good news is that with AMD64 and EM64T platforms running in 64-bit mode, the Java VM gets some additional registers which it can use to generate more efficient native instruction sequences.&nbsp; These extra registers increase performance to the point where there is often no performance loss at all when comparing 32 to 64-bit execution speed.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">The performance difference comparing an application running on a 64-bit platform versus a 32-bit platform on SPARC is on the order of 10-20% degradation when you move to a 64-bit VM.&nbsp; On AMD64 and EM64T platforms this difference ranges from 0-15% depending on the amount of pointer accessing your application performs.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_heap_defaults" id="64bit_heap_defaults" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>What are the default heap sizes for 64-bit VMs if&nbsp;<a href="http://www.oracle.com/technetwork/java/ergo5-140223.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">GC ergonomics</a>&nbsp;is not used?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">The default heap size for all 32-bit J2SE implementations is 64MB.&nbsp; We have adjusted the defaults for 64-bit implementations to be 30% larger in order to make up for the increased size of Java objects due to larger native pointers.&nbsp; Remember that Java objects contain class and lock pointers so even if you create Java objects which contain only integers, each object takes up additional memory.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_heap" id="64bit_heap" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>How large a heap can I create using a 64-bit VM?</strong></p><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">See also&nbsp;<a href="http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#gc_heap_32bit" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Why can't I get a larger heap with the 32-bit JVM?</a></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">&nbsp;</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="64bit_gc" id="64bit_gc" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Which garbage collector should I use for a very large 64-bit heaps?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">The major advantage of a 64-bit Java implementation is to be able to create and use more Java objects.&nbsp; It is great to be able to break these 2GB limits.&nbsp; Remember, however, that this additional heap must be garbage collected at various points in your application's life span. &nbsp; This additional garbage collection can cause large pauses in your Java application if you do not take this into consideration.&nbsp;&nbsp; The Hotspot VM has a number of garbage collection implementations which are targetted at Java applications with large heaps.&nbsp; We recommend enabling one of the Parallel or Concurrent garbage collectors when running with very large heaps.&nbsp; These collectors attempt to minimize the overhead of collection time by either collecting garbage concurrent with the execution of your Java application or by utilizing multiple CPUs during collections to ge the job done faster.&nbsp;<span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">&nbsp;</span>&nbsp;<br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">For more information on these garbage collection modes and how to select them please refer to the Hotspot GC tuning guide which can be found here:&nbsp;&nbsp;<a href="http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Tuning Garbage Collection with the 5.0 Java Virtual Machine</a></p><span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">&nbsp;</span><span style="font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"></span><h2 style="margin: 0px; padding: 2px 0px 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">Multithreaded Applications</h2><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="threads_general" id="threads_general" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>I have a program which uses a lot of threads and it runs slow.</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">For information on tuning applications with many threads on Solaris, please see&nbsp;<a href="http://www.oracle.com/technetwork/java/threads-140302.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Java and Solaris Threads Document</a></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">There is an undocumented option, -Xconcurrentio, which generally helps programs with many threads, particularly on Solaris. The main feature turned on with -Xconcurrentio is to use LWP based synchronization instead of thread based synchronization. We have found certain applications to speed up by over 40%. Since 1.4, LWP based synchronization is the default, but -Xconcurrentio can still help since it turns on some other internal options. Finally, there is an alternate thread library which is the default on Solaris 9 and can also be used on Solaris 8 by changing your LD_LIBRARY_PATH to include /usr/lib/lwp before /usr/lib.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="threads_oom" id="threads_oom" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>My application has a lot of threads and is running out of memory, why?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">You may be running into a problem with the default stack size for threads. In Java SE 6, the default on Sparc is 512k in the 32-bit VM, and 1024k in the 64-bit VM. On x86 Solaris/Linux it is 320k in the 32-bit VM and 1024k in the 64-bit VM.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">On Windows, the default thread stack size is read from the binary (java.exe). As of Java SE 6, this value is 320k in the 32-bit VM and 1024k in the 64-bit VM.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">You can reduce your stack size by running with the -Xss option. For example:</p><table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><tbody style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><tr style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; vertical-align: top;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">java -server -Xss64k\n</pre></td></tr></tbody></table><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Note that on some versions of Windows, the OS may round up thread stack sizes using very coarse granularity. If the requested size is less than the default size by 1K or more, the stack size is rounded up to the default; otherwise, the stack size is rounded up to a multiple of 1 MB.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">64k is the least amount of stack space allowed per thread.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="threads_library" id="threads_library" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>Which thread library should I use on Solaris 8?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Solaris 8 provides 2 versions of the threading library libthread.so. The default is the T1 library which uses a M:N threading model. The other is the T2 library which uses a 1:1 model.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">For stability &amp; performance reasons, usage of the T2 thread library is strongly recommended with HotSpot. For more information, please see the following documents:</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><a href="http://docs.oracle.com/javase/1.5.0/docs/guide/vm/thread-priorities.html#libthread" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Link 1</a></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">The T2 library is the default in Solaris 9 and later.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="threads_alternate" id="threads_alternate" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>What options do I need in order to use the "alternate" one-to-one thread model on Solaris 8 or 9?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">On Solaris 8 you need to add&nbsp;<code style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: courier, 'courier new', monaco; color: rgb(102, 102, 102);">/usr/lib/lwp</code>&nbsp;to your&nbsp;<code style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: courier, 'courier new', monaco; color: rgb(102, 102, 102);">LD_LIBRARY_PATH</code>. On Solaris 9 (or higher) the one-to-one model is the default and you do not need to do anything.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="threads_priorities" id="threads_priorities" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>How does the JVM map priorities for Java threads onto native thread priorities in Solaris?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Please see the document&nbsp;<a href="http://docs.oracle.com/javase/1.5.0/docs/guide/vm/thread-priorities.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Thread Priority on the Solaris Platform</a>.</p><span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><h2 style="margin: 0px; padding: 2px 0px 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">Performance</h2><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="perf_general" id="perf_general" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>My application runs slowly. Why?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">First, it is important to understand the percentage of time that the application is running bytecodes. If the program is I/O bound or running in native methods, then the VM is not involved in the consumption of CPU time. The VM technology will only speed up the time spent running in bytecode. Typical examples of time spent not running bytecode are graphical operations that make heavy use of native methods, and I/O operations such as reading and writing data to network sockets or database files</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Assuming that the VM is mostly executing bytecode, ensure that the VM is in the correct mode. For applications where small footprint and fast startup are important, use -client. For applications where overall performance is the most important, use -server.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">If the above does not address the performance issue, read on for more tuning parameters you can try, and also see&nbsp;<a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Java HotSpot VM Options</a>. There are also tools available such as&nbsp;<a href="http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">jstat</a>&nbsp;(Java Virtual Machine Statistics Monitoring Tool) and&nbsp;<a href="http://www.oracle.com/technetwork/java/hotspotfaq-138619.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">hprof</a>&nbsp;(A Heap/CPU Profiling Tool) that can assist in diagnosing application performance issues.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="perf_scaling" id="perf_scaling" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>My program isn't scaling with the number of processors.</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Scaling problems could be a multitude of things. First, your application may not be written in a scalable manner (if you use a lot of synchronization, for one example, or if you have only one thread, as another). It may also be that you are utilizing OS system resources which are not scalable. Finally, if you have many threads, it may be that garbage collection is getting in the way.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">For more information on GC scalability, see&nbsp;<a href="http://www.oracle.com/technetwork/java/faq-140837.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Frequently Asked Questions About Garbage Collection in the Java HotSpot VM</a>&nbsp;and&nbsp;<a href="http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;"><em style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">Tuning Garbage Collection with the 5.0 Java Virtual Machine</em>&nbsp;</a>.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">The threading model used by the VM may be a problem. For more information on threading model scalability, see&nbsp;<a href="http://www.oracle.com/technetwork/java/threads-140302.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Java and Solaris Threads Document</a></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="perf_processors" id="perf_processors" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>How many processors will the HotSpot VM scale to?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">There are practical limitations to scalability, and often garbage collection will be a bottleneck when large numbers of processors are employed. Scalability is a top priority for our development team. Currently we run applications on very large systems and we see throughput improvements for those applications which are written in a scalable way.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="perf_io" id="perf_io" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>My server application isn't getting faster, why? I/O is a problem, why?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">If you're blocked doing I/O, then no matter which version of java you use you will not be able to speed this up. If your application is using many threads you may be encountering scalability issues. For more information on diagnosing and resolving threading-related scalability issues, please see&nbsp;<a href="http://www.oracle.com/technetwork/java/threads-140302.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">Java and Solaris Threads Document</a>.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="perf_database" id="perf_database" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>My application uses a database and doesn't seem to scale well. What could be going on?</strong></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Oracle provides two types of database drivers: a type-2 driver, called the OCI (Oracle Call Interface) driver that utilizes native code, and a type-4 pure Java driver called the thin driver. In single processor environments, the thin driver works somewhat better than the OCI driver because of the JNI overhead associated with the OCI driver. On multi-processor configurations, synchronization points within Solaris used by the OCI driver become big bottlenecks and prevent scaling. One way to resolve the sync issue is to use libumem on Solaris. Otherwise, we recommend using the thin driver.</p><span class="sp10" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">&nbsp;</span><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><h2 style="margin: 0px; padding: 2px 0px 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);">Benchmarking the Java HotSpot VM</h2><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><a name="benchmarking_simple" id="benchmarking_simple" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">I write a simple loop to time a simple operation and it's slow. What am I doing wrong? Here's my program:</strong><code style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: courier, 'courier new', monaco; color: rgb(102, 102, 102);"></code></p><table width="100%" cellspacing="0" cellpadding="10" border="0" class="grey4" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><tbody style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><tr style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><td style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: arial, helvetica, sans-serif; vertical-align: top;"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;">       public class Benchmark {\n            public static void main(String[] arg) {\n                ong before = System.currentTimeMillis();\n                int sum = 0;\n                for (int index = 0; index &lt; 10*1000*1000; index += 1) {\n                    sum += index;\n                }\n                long after = System.currentTimeMillis();\n                System.out.println("Elapsed time: " +\n                                   Long.toString(after - before) +\n                                   " milliseconds");\n            }\n        }\n</pre></td></tr></tbody></table><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">You are writing a microbenchmark.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">Remember how HotSpot works. It starts by running your program with an interpreter. When it discovers that some method is "hot" -- that is, executed a lot, either because it is called a lot or because it contains loops that loop a lot -- it sends that method off to be compiled. After that one of two things will happen, either the next time the method is called the compiled version will be invoked (instead of the interpreted version) or the currently long running loop will be replaced, while still running, with the compiled method. The latter is known as "on stack replacement", or OSR.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">In the meantime, if you insist on using/writing microbenchmarks like this, you can work around the problem by moving the body of main to a new method and calling it once from main to give the compiler a chance to compile the code, then calling it again in the timing bracket to see how fast HotSpot is.</p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);">See also the JavaOne 2002 presentation&nbsp;<a href="http://www.oracle.com/technetwork/java/hotspotfaq-138619.html" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130); text-decoration: none;">S-1816 How NOT To Write A Microbenchmark</a></p><p style="margin-right: 0px; margin-bottom: 10px; margin-left: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; line-height: 16px; font-size: 12px; font-family: Arial, Helvetica, sans-serif; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased;"><a name="benchmarking_method" id="benchmarking_method" style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; color: rgb(31, 79, 130);"></a>I'm trying to time method invocation time. I don't want there to be any extra work done, so I'm using an empty method. But when I run with HotSpot I get times that are unbelievably fast. Here's my code:</strong><code style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: courier, 'courier new', monaco; color: rgb(102, 102, 102);"></code></p><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"><br style="margin: 0px; padding: 0px; list-style: none; -webkit-font-smoothing: antialiased; font-family: Arial, Helvetica, sans-serif; font-size: 12px; background-color: rgb(255, 255, 255);"></div></body></html>